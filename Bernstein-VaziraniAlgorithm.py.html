#!/usr/bin/env python
# coding: utf-8

# In[1]:


from qiskit import *
from qiskit.visualization import plot_histogram


# In[2]:


get_ipython().run_line_magic('matplotlib', 'inline')


# In[3]:


secret = '1001'


# In[4]:


circuit = QuantumCircuit(len(secret)+1, len(secret))

#circuit.h([0,1,2,3,4,5])
circuit.h(range(len(secret)))
          
#circuit.x(6)
circuit.x(len(secret))
          
#circuit.h(6)
circuit.h(len(secret))

circuit.barrier()

for i, x in enumerate(reversed(secret)):
    if x == '1':
        circuit.cx(i, len(secret))

#circuit.cx(5,6)
#circuit.cx(3,6)
#circuit.cx(0,6)

circuit.barrier()

#circuit.h([0,1,2,3,4,5])
circuit.h(range(len(secret)))

circuit.barrier()
circuit.measure(range(len(secret)), range(len(secret)))


# In[5]:


circuit.draw(output='mpl')


# In[6]:


sim = Aer.get_backend('qasm_simulator')
results = execute(circuit, backend=sim, shots=1).result()
counts = results.get_counts()
print(counts)


# In[ ]:





# In[ ]:





# In[ ]:




